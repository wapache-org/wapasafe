





OAuth2授权码授权流程

```

用户    第三方APP      OAuth2认证授权提供方(譬如微信QQ支付宝)
                      
浏览器  OAuth2客户端  认证授权服务器  用户资源服务器
或手机

  ---------------------> 注册
          -------------> 注册


  -------> 登录(选择某个OAuth2提供方)
          -------------> 申请授权
  <--------------------- 如果用户没在线, 则跳转到登录界面
  ---------------------> 登录
  <--------------------- 如果用户已在线, 则跳转到授权界面
  ---------------------> 确认授权
          <------------- 授权码
          
          
          -------------> 换取访问资源服务器的访问令牌
          <------------- 访问令牌


          ---------------------------> 获取用户的资源(譬如用户名,昵称,头像,邮箱等等)
                         <------------ 访问令牌是否有效?
                         ------------> 有效!
          <--------------------------- 返回用户资源
  <------- 登录成功
  
  
  -------> 做不可告人的事情
```
